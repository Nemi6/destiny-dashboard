<div>
  <div [class.dd-card-wrap]="!isFullscreen">
    <dd-card-header *ngIf="!isFullscreen" [dashboardCard]="dashboardCard"></dd-card-header>
    <div class="dd-clan-leaderboards" [class.dd-fullscreen]="isFullscreen" [class.dd-card-content]="!isFullscreen">

      <div class="gamertag-wrap">
        <dd-gamertag-autocomplete [autocompleteId]="'clan-leaderboards'" (membershipSelected)="membershipSelected($event)" (initialMembership)="membershipSelected($event)"></dd-gamertag-autocomplete>
      </div>

      <md-toolbar class="md-toolbar">
        <div *ngIf="isFullscreen || dashboardCard.layout.cols > 2" class="icon" [style.background-image]="domSanitizer.bypassSecurityTrustStyle('url(https://www.bungie.net' + selectedMembership.iconPath +')')"></div>
        <div class="clan-name">{{bungieClanName}} </div>
        <div *ngIf="isFullscreen || dashboardCard.layout.cols > 2" class="spacer"></div>
        <button md-button class="toolbar-menu" [mdMenuTriggerFor]="appMenu"><md-icon>menu</md-icon> Stats </button>
      </md-toolbar>

      <md-menu #appMenu="mdMenu">
        <button md-menu-item class="md-menu-item" (click)="statsChanged(4)"> Raid </button>
        <button md-menu-item class="md-menu-item" (click)="statsChanged(5)"> All PvP </button>
        <button md-menu-item class="md-menu-item" (click)="statsChanged(7)"> All PvE </button>
        <button md-menu-item class="md-menu-item" (click)="statsChanged(14)"> Trials of Osiris </button>
        <button md-menu-item class="md-menu-item" (click)="statsChanged(16)"> Nightfall </button>
        <button md-menu-item class="md-menu-item" (click)="statsChanged(18)"> All Strikes </button>
      </md-menu>

      <div class="stat-group" #statGroup *ngIf="selectedMembership != null" (membershipSelected)="membershipSelected($event)">

        <div *ngIf="clanLeaderboardsStats != null" class="stat-container">
          <div *ngIf="lbSingleGameKills != null" class="stat-section">
            <div class="header">{{statDisplayName}}: Single Game Kills</div>
            <div *ngFor="let singleGameKillEntry of lbSingleGameKills.entries">
              <span>{{singleGameKillEntry?.rank}}</span>
              <span>{{singleGameKillEntry.player?.destinyUserInfo.displayName}}</span>
              <span>{{singleGameKillEntry.value?.basic.value | pNumberFormatLocale}}</span>
            </div>
          </div>

          <div *ngIf="lbMostPrecisionKills != null" class="stat-section">
            <div class="header">{{statDisplayName}}: Most Precision Kills</div>
            <div *ngFor="let mostPrecisionKillsEntry of lbMostPrecisionKills.entries">
              <span>{{mostPrecisionKillsEntry?.rank}}</span>
              <span>{{mostPrecisionKillsEntry.player?.destinyUserInfo.displayName}}</span>
              <span>{{mostPrecisionKillsEntry.value?.basic.value | pNumberFormatLocale}}</span>
            </div>
          </div>

          <div *ngIf="lbLongestKillSpree != null" class="stat-section">
            <div class="header">{{statDisplayName}}: Longest Kill Spree</div>
            <div *ngFor="let longestKillSpreeEntry of lbLongestKillSpree.entries">
              <span>{{longestKillSpreeEntry?.rank}}</span>
              <span>{{longestKillSpreeEntry.player?.destinyUserInfo.displayName}}</span>
              <span>{{longestKillSpreeEntry.value?.basic.value | pNumberFormatLocale}}</span>
            </div>
          </div>

          <div *ngIf="lbLongestSingleLife != null" class="stat-section">
            <div class="header">{{statDisplayName}}: Longest Single Life</div>
            <div *ngFor="let longestSingleLifeEntry of lbLongestSingleLife.entries">
              <span>{{longestSingleLifeEntry?.rank}}</span>
              <span>{{longestSingleLifeEntry.player?.destinyUserInfo.displayName}}</span>
              <span>{{longestSingleLifeEntry.value?.basic.displayValue}}</span>
            </div>
          </div>

          <div *ngIf="lbSingleGameScore != null" class="stat-section">
            <div class="header">{{statDisplayName}}: Single Game Score</div>
            <div *ngFor="let singleGameScoreEntry of lbSingleGameScore.entries">
              <span>{{singleGameScoreEntry?.rank}}</span>
              <span>{{singleGameScoreEntry.player?.destinyUserInfo.displayName}}</span>
              <span>{{singleGameScoreEntry.value?.basic.value | pNumberFormatLocale}}</span>
            </div>
          </div>
        </div>

      </div>
    </div>